<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kitty Fitness - K·∫ø ho·∫°ch c·ªßa b·∫°n</title>
    <style>
        /* CSS t∆∞∆°ng t·ª± index.html cho giao di·ªán */
        body { background-color: #f7e1f4; font-family: sans-serif; }
        .container-content { max-width: 800px; margin: 50px auto; background-color: white; padding: 40px; border-radius: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        h2, h3 { color: #ff69b4; text-align: center; margin-bottom: 20px; }
        .summary p { text-align: center; font-size: 1.1em; }
        .summary b { color: #ff69b4; font-size: 1.2em; }
        
        .plan-table { width: 100%; border-collapse: separate; border-spacing: 0 8px; margin-top: 20px; }
        .plan-table th, .plan-table td { text-align: center; padding: 10px; }
        .plan-table th { background-color: #ff69b4; color: white; }
        .plan-table tr:nth-child(even) td { background-color: #fff0f5; }
        .plan-table tr:nth-child(odd) td { background-color: #ffe8f0; }
        .plan-table tr:first-child th:first-child { border-top-left-radius: 8px; }
        .plan-table tr:first-child th:last-child { border-top-right-radius: 8px; }
        
        .action-section { margin-top: 30px; padding: 20px; border: 1px solid #ffb7d8; border-radius: 10px; }
        .action-section form { display: inline-block; margin-right: 20px; }
        .action-section select, .action-section button { padding: 8px; border-radius: 5px; border: 1px solid #ff69b4; }
        .action-btn { background-color: #ff69b4; color: white; border: none; cursor: pointer; }
        .back-link { display: block; text-align: center; margin-top: 30px; color: #ff69b4; text-decoration: none; }
        .message-box { padding: 10px; background-color: #d4edda; color: #155724; border-color: #c3e6cb; border-radius: 5px; text-align: center; margin-bottom: 20px; font-weight: bold;}
    </style>
</head>
<body>
    <div class="container-content">
        <h2>üìä K·∫ø ho·∫°ch t·∫≠p luy·ªán 7 ng√†y</h2>
        
        {% if message %}
            <div class="message-box">{{ message|safe }}</div>
        {% endif %}

        <div class="summary">
            <p>T·ªïng Kcal ∆∞·ªõc t√≠nh: <b>{{ total_kcal }} kcal</b> (Target: {{ target_kcal }} kcal)</p>
            <p>Sai l·ªách: <span style="color: {% if deviation > 0 %}green{% else %}red{% endif %}">**{{ deviation|floatformat:1 }} kcal**
            </span></p>
        </div>
        
        {{ plan_html|safe }} 

        <div class="action-section">
            <h3>üîÑ T√πy ch·ªânh K·∫ø ho·∫°ch</h3>

            <form method="post" action="{% url 'planner:modify_plan' %}">
                {% csrf_token %}
                <input type="hidden" name="action" value="swap">
                <label>ƒê·ªïi ho·∫°t ƒë·ªông gi·ªØa</label>
                <select name="day1">
                    {% for day in day_options %}
                        <option value="{{ day }}">{{ day }}</option>
                    {% endfor %}
                </select>
                <label>v√†</label>
                <select name="day2">
                    {% for day in day_options %}
                        <option value="{{ day }}">{{ day }}</option>
                    {% endfor %}
                </select>
                <button type="submit" class="action-btn">Ho√°n ƒë·ªïi (Swap)</button>
            </form>
            
            <hr style="border-color: #ffb7d8;">

            <form method="post" action="{% url 'planner:modify_plan' %}">
                {% csrf_token %}
                <input type="hidden" name="action" value="change_activity">
                <label>ƒê·ªïi ho·∫°t ƒë·ªông kh√°c c·ªßa ng√†y</label>
                <select name="day_to_change">
                    {% for day in day_options %}
                        <option value="{{ day }}">{{ day }}</option>
                    {% endfor %}
                </select>
                <button type="submit" class="action-btn">ƒê·ªïi ho·∫°t ƒë·ªông</button>
            </form>
        </div>
        
        <a href="{% url 'planner:planner_home' %}" class="back-link">
            ‚¨ÖÔ∏è T·∫°o k·∫ø ho·∫°ch m·ªõi
        </a>
    </div>
</body>
</html>