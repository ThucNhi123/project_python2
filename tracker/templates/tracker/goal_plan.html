{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>üéØ L·∫≠p k·∫ø ho·∫°ch tu·∫ßn</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(180deg, #fff0f6, #fff);
      font-family: 'Poppins', sans-serif;
      color: #d63384;
      text-align: center;
      padding: 40px;
    }
    form {
      background: white;
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 6px 20px rgba(255, 105, 180, 0.25);
      width: 420px;
      margin: 0 auto;
    }
    button {
      background-color: #ff66b3;
      border: none;
      color: white;
      font-weight: bold;
      border-radius: 10px;
      padding: 10px 20px;
      transition: 0.3s;
    }
    button:hover {
      background-color: #ff4da6;
      transform: scale(1.05);
    }
    table {
      margin-top: 30px;
      background-color: white;
      border-radius: 15px;
      overflow: hidden;
    }
    table a {
      color: #d63384;
      text-decoration: none;
      font-weight: 600;
    }
    table a:hover {
      text-decoration: underline;
      color: #ff3399;
    }
    .back-btn {
      margin-top: 25px;
      display: inline-block;
      background-color: #ffd6e8;
      color: #d63384;
      border: 2px solid #ff99cc;
      border-radius: 10px;
      font-weight: 600;
      padding: 8px 18px;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    .back-btn:hover {
      background-color: #ff99cc;
      color: white;
      transform: scale(1.05);
    }
  </style>
</head>
<body>
  <h2>üéÄ L·∫≠p k·∫ø ho·∫°ch t·∫≠p luy·ªán tu·∫ßn</h2>

  <form method="post">
    {% csrf_token %}
    <div class="mb-3">
      <label>M·ª•c ti√™u thay ƒë·ªïi c√¢n n·∫∑ng (kg/tu·∫ßn)</label>
      <input type="number" step="0.1" name="weight_change" class="form-control" required>
    </div>
    <div class="mb-3">
      <label>S·ªë ng√†y t·∫≠p m·ªói tu·∫ßn</label>
      <input type="number" name="days" class="form-control" value="5" required>
    </div>
    <div class="mb-3">
      <label>Th·ªùi gian t·ªëi ƒëa m·ªói ng√†y (ph√∫t)</label>
      <input type="number" name="max_minutes" class="form-control" value="60" required>
    </div>
    <div class="mb-3">
      <label>Nh·ªãp tim c∆° s·ªü (bpm)</label>
      <input type="number" name="base_hr" class="form-control" value="120" required>
    </div>
    <div class="mb-3">
      <label>Chi·∫øn l∆∞·ª£c</label>
      <select name="strategy" class="form-select">
        <option value="duration_first">‚è±Ô∏è ∆Øu ti√™n th·ªùi l∆∞·ª£ng</option>
        <option value="hr_first">‚ù§Ô∏è ∆Øu ti√™n nh·ªãp tim</option>
      </select>
    </div>
    <button type="submit">T·∫°o k·∫ø ho·∫°ch üí™</button>
  </form>

  {% if weekly_target %}
    <h4 class="mt-4">üî• M·ª•c ti√™u tu·∫ßn: {{ weekly_target|floatformat:0 }} kcal</h4>
    <div class="container mt-3">
      <table class="table table-hover text-center">
        <thead class="table-light">
          <tr>
            <th>Ng√†y</th>
            <th>M·ª•c ti√™u kcal</th>
            <th>Th·ªùi l∆∞·ª£ng (ph√∫t)</th>
            <th>Nh·ªãp tim (bpm)</th>
            <th>ƒê·∫°t?</th>
            <th>Chi ti·∫øt</th>
          </tr>
        </thead>
        <tbody>
          {% for row in plan_df %}
            <tr>
              <td>{{ row.Day }}</td>
              <td>{{ row.Target_kcal }}</td>
              <td>{{ row.Suggest_Duration_min }}</td>
              <td>{{ row.Suggest_HR_bpm }}</td>
              <td>{{ row.Feasible }}</td>
              <td><a href="{% url 'daily_detail' row.Day %}">Xem chi ti·∫øt üå∏</a></td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% endif %}

  <a href="{% url 'index' %}" class="back-btn">‚¨ÖÔ∏è Quay l·∫°i trang ch·ªß</a>
</body>
</html>
